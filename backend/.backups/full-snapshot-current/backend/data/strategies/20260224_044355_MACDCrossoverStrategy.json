{
  "name": "MACDCrossoverStrategy",
  "description": "MACD crossover strategy - buy when MACD line crosses above signal line, sell when crosses below",
  "code": "import pandas as pd\nimport numpy as np\nimport ta\nfrom engine.strategy import BaseStrategy, Signal\n\nclass MACDCrossoverStrategy(BaseStrategy):\n    def on_bar(self, bar, history):\n        if len(history) < 27:\n            return None\n        \n        macd_indicator = ta.trend.MACD(close=history['close'], window_fast=12, window_slow=26, window_sign=9)\n        macd_line = macd_indicator.macd()\n        signal_line = macd_indicator.macd_signal()\n        \n        if len(macd_line) < 2 or len(signal_line) < 2:\n            return None\n            \n        current_macd = macd_line.iloc[-1]\n        prev_macd = macd_line.iloc[-2]\n        current_signal = signal_line.iloc[-1]\n        prev_signal = signal_line.iloc[-2]\n        \n        # MACD crosses above signal line (bullish crossover)\n        if prev_macd <= prev_signal and current_macd > current_signal:\n            return Signal(action='buy', size=1.0)\n        \n        # MACD crosses below signal line (bearish crossover)\n        if prev_macd >= prev_signal and current_macd < current_signal:\n            return Signal(action='sell', size=1.0)\n        \n        return None",
  "parameters": {
    "fast_period": 12,
    "slow_period": 26,
    "signal_period": 9
  },
  "symbol": "NQ=F",
  "interval": "1d",
  "created_at": "2026-02-24T04:43:55.970458",
  "backtest_metrics": {
    "total_trades": 23,
    "win_rate": 0.2608695652173913,
    "loss_rate": 0.7391304347826086,
    "total_return": -90935.0,
    "total_return_pct": -363.74,
    "max_drawdown": -141705.0,
    "max_drawdown_pct": -206.06,
    "max_consecutive_losses": 9,
    "max_consecutive_wins": 2,
    "profit_factor": 0.49,
    "sharpe_ratio": -4.14,
    "avg_win": 14816.67,
    "avg_loss": -10578.53,
    "sortino_ratio": -7.68,
    "calmar_ratio": 19.34,
    "recovery_factor": 0.64,
    "expectancy": -3953.7,
    "expectancy_ratio": -0.37,
    "payoff_ratio": 1.4,
    "deflated_sharpe_ratio": -6.2775,
    "dsr_pvalue": 1.0
  },
  "monte_carlo": {
    "num_simulations": 1000,
    "num_trades": 23,
    "mean_return": -90935.0,
    "median_return": -90935.0,
    "std_return": 0.0,
    "percentile_5": -90935.0,
    "percentile_25": -90935.0,
    "percentile_75": -90935.0,
    "percentile_95": -90935.0,
    "mean_max_drawdown": -118901.02,
    "median_max_drawdown": -117817.5,
    "worst_max_drawdown": -179835.0,
    "percentile_95_drawdown": -154272.75,
    "probability_of_ruin": 100.0,
    "probability_of_profit": 0.0,
    "equity_percentiles": {
      "p5": [
        25000.0,
        -4435.0,
        -11613.5,
        -22285.0,
        -30340.5,
        -40803.0,
        -47167.0,
        -54988.75,
        -63923.25,
        -70125.75,
        -75093.25,
        -83036.0,
        -85984.75,
        -88044.25,
        -91547.5,
        -96744.75,
        -101310.5,
        -103664.25,
        -102248.25,
        -103468.0,
        -101538.5,
        -101415.0,
        -91040.0,
        -65935.0
      ],
      "p25": [
        25000.0,
        14585.0,
        4505.0,
        -5307.5,
        -11646.25,
        -17381.25,
        -22421.25,
        -26372.5,
        -32855.0,
        -38087.5,
        -44052.5,
        -47977.5,
        -50665.0,
        -54458.75,
        -58545.0,
        -62105.0,
        -63750.0,
        -65251.25,
        -67970.0,
        -69890.0,
        -68545.0,
        -66530.0,
        -67060.0,
        -65935.0
      ],
      "p50": [
        25000.0,
        18595.0,
        13730.0,
        8580.0,
        5677.5,
        2142.5,
        -2437.5,
        -5990.0,
        -8997.5,
        -12495.0,
        -17822.5,
        -22070.0,
        -24407.5,
        -26657.5,
        -29402.5,
        -34312.5,
        -38492.5,
        -39987.5,
        -43570.0,
        -46230.0,
        -50200.0,
        -53800.0,
        -60205.0,
        -65935.0
      ],
      "p75": [
        25000.0,
        26125.0,
        25090.0,
        25403.75,
        25453.75,
        26145.0,
        21023.75,
        20542.5,
        18897.5,
        15060.0,
        9771.25,
        5977.5,
        2748.75,
        1195.0,
        -3132.5,
        -8075.0,
        -14310.0,
        -19453.75,
        -24001.25,
        -30490.0,
        -35831.25,
        -45600.0,
        -55520.0,
        -65935.0
      ],
      "p95": [
        25000.0,
        50982.0,
        59640.0,
        56207.75,
        56888.75,
        55513.25,
        54281.25,
        50726.75,
        50392.25,
        52673.5,
        44586.0,
        40927.5,
        38048.0,
        33325.5,
        25512.0,
        23223.5,
        14682.0,
        6422.5,
        -68.25,
        -8608.75,
        -19583.5,
        -29321.5,
        -39480.0,
        -65935.0
      ]
    },
    "method": "reshuffle",
    "robustness_score": null,
    "robustness_grade": null,
    "sub_results": null
  }
}